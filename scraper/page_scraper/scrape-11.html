<html>
	<body>
		<!-- Lo script funziona se inserito su htdocs-->
		<script src="jquery.min.js"></script>
		<script src="jquery.xdomainajax.js"></script>

		<script type="text/javascript">

			var base_link = 'https://en.wikipedia.org/wiki/' //%C7%83Kung_people

			var wikiUrl = "http://en.wikipedia.org/w/api.php?action=opensearch&search=New_York_Yankees&format=json&callback=wikiCallbackFunction";

			var backlinks = 'https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=Nelson_Mandela'

			var example = 'https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=Bill_of_Rights_%28South_Africa%29'


			art = [
			    "!Kung_people", 
			    "Actuarial_Society_of_South_Africa_HIV/AIDS_models",
			    /*"Africa_Day",
			    "African_Leaders_Malaria_Alliance",
			    "African_music",
			    "Agriculture_in_South_Africa",
			    "AIDS_orphan",
			    "Alcohol_abuse",
			    "Alcohol_dependence",
			    "Alcoholism",
			    "Aloe",
			    "Aloe_vera",
			    "Animal_husbandry",
			    "Animal_husbandry_in_South_Africa",
			    "Animal-powered_transport",
			    "Apartheid",
			    "Automobile",
			    "Bias",
			    "Bicycle",
			    "Chapter_Two_of_the_Constitution_of_South_Africa",
			    "Bird_nest",
			    "Boiling",
			    "Borehole",
			    "Bullying",
			    "Castle_of_Good_Hope",
			    "Ceramic",
			    "Child_abuse",
			    "Children%27s_Act_%28South_Africa%29",
			    "Children%27s_Day",
			    "Circuit_diagram",
			    "Clay",
			    "Coal",
			    "Coal_in_South_Africa",
			    "Cooking",
			    "Cradle_of_Humankind",
			    "Decanting",
			    "Discrimination",
			    "Domestic_violence",
			    "Domestic_violence_in_South_Africa",
			    "Drakensberg",
			    "Duration_%28music%29",
			    "Economy_of_South_Africa",
			    "Electrical_conductor",
			    "Electrical_network",
			    "Electricity_generation",
			    "Energy_in_South_Africa",
			    "Fabric",
			    "Fair_trade",
			    "Farm",
			    "Fiber",
			    "Fire_safety",
			    "Food",
			    "Food_groups",
			    "Food_security",
			    "Food_vs._fuel",
			    "Frances_Baard",
			    "Free_State_%28province%29",
			    "Freedom_Day_%28South_Africa%29",
			    "Gana_and_Gwi_people",
			    "Gangster",
			    "Gauteng",
			    "Gender_stereotypes",
			    "Glass",
			    "Griqua_people",
			    "Hand_washing",
			    "Health_care_in_South_Africa",
			    "Herero_and_Namaqua_Genocide",
			    "Heritage_Day_%28South_Africa%29",
			    "History_of_South_Africa",
			    "HIV",
			    "HIV/AIDS",
			    "HIV/AIDS_denialism",
			    "HIV/AIDS_in_South_Africa",
			    "Home_safety",
			    "Hottentot_Venus",
			    "Human_nutrition",
			    "Human_Rights_Day",
			    "Insulator_%28electricity%29",
			    "Khoikhoi",
			    "Khoikhoi_mythology",
			    "Later_Stone_Age",
			    "Liquid_fuel",
			    "List_of_abandoned_railway_lines_in_South_Africa",
			    "List_of_African_cuisines",
			    "List_of_heritage_sites_in_North_West",
			    "List_of_restaurants_in_South_Africa",
			    "List_of_South_African_locomotive_classes",
			    "List_of_wineries_in_South_Africa",
			    "Mahatma_Gandhi",
			    "Malaria",
			    "Mandela_Day",
			    "Mapungubwe",
			    "Mapungubwe_Museum",
			    "Mapungubwe_National_Park",
			    "Mining_industry_of_South_Africa",
			    "Mpumalanga",
			    "Music_of_South_Africa",
			    "National_Women%27s_Day",
			    "Nelson_Mandela",
			    "Nest",
			    "Nest-building_in_primates",
			    "Noise_pollution",
			    "Oliver_Tambo",
			    "Outline_of_domestic_violence",
			    "Outline_of_food_preparation",
			    "Outline_of_South_Africa",
			    "Paper",
			    "People_Against_Gangsterism_and_Drugs",
			    "Petrol-paraffin_engine",
			    "Pitch_%28music%29",
			    "Politics_of_South_Africa",
			    "Portal:South_Africa",
			    "Processed_food",
			    "Rail_transport",
			    "Rail_transport_in_South_Africa",
			    "Reconciliation_Day",
			    "Republic_of_South_Africa",
			    "Right_to_food",
			    "Right_to_food_by_country",
			    "San_healing_practices",
			    "San_languages",
			    "San_people",
			    "San_religion",
			    "San_rock_art",
			    "Sand",
			    "Sentraal-Suid_Ko%C3%B6perasie",
			    "Settling",
			    "Sexism",
			    "Sieving",
			    "Sound",
			    "South_African_AIDS_Vaccine_Initiative",
			    "South_African_cuisine",
			    "South_African_locomotive_history",
			    "South_African_Malaria_Initiative",
			    "Stereotype",
			    "Steve_Biko",
			    "Tap_%28valve%29",
			    "Traditional_knowledge",
			    "Transport",
			    "Transport_in_South_Africa",
			    "Transvaal_Agricultural_Union",
			    "Two_foot_gauge_railways_in_South_Africa",
			    "Vibration",
			    "Walter_Sisulu",
			    "Water_Board_%28South_Africa%29",
			    "Water_filter",
			    "Water_pollution",
			    "Water_privatization_in_South_Africa",
			    "Water_supply_and_sanitation_in_South_Africa",
			    "Water_well",
			    "Wax",
			    "WESSA",
			    "Western_Cape",
			    "Wetlands",
			    "Wildlife_conservation",
			    "Wildlife_management",
			    "Winnie_Madikizela-Mandela",
			    "Wood",
			    "Wool",
			    "Youth_culture"*/
			]

			var articles_list = '../articles.json'

			$.getJSON(articles_list, function(mydata){

				var parse_art = $.parseHTML(mydata);

				articles = []
				articles = $(mydata)

				$.each(mydata, function(a,v){

					//var x = v.replace(/[^a-z0-9]+/gi,' ')

					//console.log(x)
					//$('#content2').append( x + '<br/>')
				})

				console.log(articles)
			
			});

			function get_source_target(url) {
	        
		        $.ajax (url, {
	                dataType: "jsonp",
	                success: function( wikiResponse ) {

	                	var parse_back = $.parseHTML(wikiResponse);

	                	back = []
						back = $(wikiResponse.query.backlinks)

						var art_name = url.replace('https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=','')
						var art_name1 = art_name.replace(/[^a-z0-9]+/gi,' ')
						var art_name2 = art_name1.replace('%C7%83',' ')
						var art_name3 = art_name2.replace('%28',' ')
						var art_name4 = art_name3.replace('%29',' ')

	            	    $.each(back, function(i,item){

	                    	var cont = item.title 
	                    	
	                    	$('#content2').append('<span class="red">' + art_name4 + '</span>, ' + cont + ',<br/>')

	                    })

	                }
		        })
		    }

	        function get_all_source_target() {

	        	$('#source_target').html('Id,label<br/>')

				for (i of articles) {  //art
					
					var title = i

					get_source_target('https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=' + i)
					
				}

				$('.remove').remove()

				console.log(title)

			}

	        //function get_id_label(url) {

	        	//$('#content1').append('id, label')

	        	/*
	            $.ajax(url, {
	                dataType: "jsonp",
	                success: function( wikiResponse ) {

	                	var parse_back = $.parseHTML(wikiResponse); //parseHTML

	                	back = []
						back = $(wikiResponse.query.backlinks)

						var art_name = url.replace('https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=','')
						var art_name1 = art_name.replace(/[^a-z0-9]+/gi,' ')
						var art_name2 = art_name1.replace('%C7%83',' ')
						var art_name3 = art_name2.replace('28',' ')
						var art_name4 = art_name3.replace('29',' ')

						$('#content1').append('id, label')

	            	    $.each(back, function(i,item){

	                    	var cont = item.title 

	                    	//$(document.createElement('ul'))
	                    	
	                    	$('#content1').append(cont + ', <span class="red">' + art_name1 + '</span><br/>')

	                    })

	                    //console.log('ok: ' + art_name1 )

	                }

	            })
			*/
	        //}           


			

			/*for (i of art) {
				
				//var title = i

				//$('#content2').html(title)

				/*
				get_source_target('https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=' + i)
				*/

				//get_id_label('https://en.wikipedia.org/w/api.php?action=query&list=backlinks&bllimit=500&format=json&bltitle=' + i)
			//}



		</script>

	<main>
		<!--
		<h1>Content</h1>
		<p>Se non riesco a screpare qualcosa, usare Scraper (estensione Chrome), Outbit</p>
		<p>Gephy needs id-label, source(id)-target </p>
		-->


		<div id="response"></div>

		<div class="box">
			<!--<div onclick="get_all_source_target()"><span class="remove">Get source-target</span></div>-->
			<div  onclick="get_all_source_target">test</div>
			<div id="source_target"></div>
			<div id="content2" class="box_100 source_target"></div>
		</div>

		<div class="box">
			<div id="content1" class="box_100 source_target"></div>
			<div onclick=""><span class="remove">Get id-label<span></div>
		</div>

		<div class="clear"></div>




		<div id="content8" class="box"></div>
		<div id="content9" class="box"></div>
		<div id="content10" class="box"></div>
		<div id="content11" class="box"></div>

		




		<div id="content3" class="box"></div>
		<div id="content4" class="box"></div>
		<div id="content5" class="box"></div>
		<div id="content6" class="box"></div>
		<div id="content7" class="box"></div>
		
		
	</main>


	</body>

	<style>
		#content{
			width: 80%;
			height: 300px;
		}
		.box{
			width: 18%;
			float:left;
		}
		.box_50{
			width: 50%;
			float:left;
		}
		.box_100{
			width: 100%;
			float:left;
		}
		.clear{
			clear: both;
		}
		.red{
			color: red;
		}
		body {
			font-size: 12px;
		}
	</style>

</html>


<!--

Function for call the proxy
http://goobbe.com/questions/2928320/how-to-call-more-than-one-url-from-one-button-in-jquery-ajax


Convertitore Unix timestamp to Readable Date/time
http://www.onlineconversion.com/unix_time.htm

http://www.4guysfromrolla.com/articles/102710-1.aspx


-->